# Gostwriter configuration example
# Copy this file to config.yaml and adjust values as needed.
# Environment variables in ${VAR} form are expanded.

server:
  address: ":8080"
  readTimeout: 15s
  writeTimeout: 30s
  idleTimeout: 60s
  maxUploadSize: 10Mi
  workerCount: 4
  storageDir: "data"
  # Optional static API key for requests (header X-API-Key). Leave empty to disable.
  apiKey: ""
  # SQLite DB file path; default is storage_dir/gostwriter.db if empty.
  databasePath: ""
  shutdownGrace: 15s
  callbackRetries: 3
  callbackBackoff: 2s

llm:
  provider: "aiproxy"
  aiproxy:
    # When running via Docker Compose, use host.docker.internal to reach services on the host machine.
    # This resolves to the host gateway on Docker Desktop and on Linux with Docker 20.10+.
    baseUrl: "http://host.docker.internal:8900"
    apiKey: "${AIPROXY_API_KEY}"
    model: "gpt-5"
    systemPrompt: ""
    instructions: ""
    temperature: 0
    maxTokens: 0
  mock:
    delay: 2s
    prefix: "Transcribed by Mock"

# Single target configuration
target:
  type: "git"
  name: "docs-main"
  repoUrl: "https://github.com/yourorg/yourrepo.git"
  branch: "main"
  # Base path inside the repo to place the markdown (optional). Empty means repo root.
  basePath: "inbox/"
  filenameTemplate: "{{ .Timestamp.Format \"20060102-150405\" }}-{{ .JobID }}.md"
  commitMessageTemplate: "Add transcription {{ .JobID }}"
  authorName: "Gostwriter Bot"
  authorEmail: "bot@example.com"
  # Optional: override clone cache location; defaults to storage_dir/repos
  cloneCacheDir: ""
  auth:
    type: "basic"
    username: "git"
    token: "${GIT_TOKEN}"
